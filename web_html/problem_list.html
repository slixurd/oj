<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>题目列表</title>
<meta http-equiv="Content-Type" content="text/html" charset="utf-8"/>
<link rel="stylesheet" type="text/css" href="css/admin.css">
<script type="text/javascript" src="js/jquery-1.9.1.js"></script>
<script type="text/javascript" src="js/admin.js"></script>
</head>
<body>
<div class="wrapper">
	<div class="container clearfix">
		<ul class="slide-bar pull-left">
		<li class="active"><a href="#">题目列表</a></li>
		<li><a href="#">添加题目</a></li>
		<li><a href="#">课程列表</a></li>
		<li><a href="#">添加课程</a></li>
		<li><a href="#">竞赛列表</a></li>
		<li><a href="#">添加竞赛</a></li>
		<li><a href="#">排名</a></li>
		<li><a href="#">状态</a></li>
		<li><a href="#">账号生成器</a></li>
		<li><a href="#">权限管理</a></li>
		<li><a href="#">修改密码</a></li>
		<li><a href="#">新手须知</a></li>
		</ul>

		<div class="problem-list pull-right">
			<table class="table">
				<caption>题目列表</caption>
				<thead>
					<tr>
						<th class="span1">问题ID</th>
						<th class="span6">名称</th>
						<th class="span6">时间</th>
						<th class="span3">状态</th>
						<th class="span1">删除</th>
						<th class="span1">编辑</th>
						<th class="span2">测试数据</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>1001</td>
						<td class="avoid-overflow" title="这是一条溢出的题目标题，用于测试">这是一条溢出的题目标题，用于测试</td>
						<td>2013-08-20 20:00</td>
						<td>
							<div class="select-down">
								<span class="select-down-span status-span">Availablefadfafafd<i class="down"></i></span>
								<select class="select-down-select" name="status" autocomplete="off">
									<option value="available" selected="selected" id="http://www.baidu.com">Available</option>
									<option value="reserved" id="http://www.google.com">Reserved</option>
								</select>
							</div>
						</td>
						<td><a href="#">删除</a></td>
						<td><a href="#">编辑</a></td>
						<td><a href="#">测试数据</a></td>
					</tr>
					<tr>
						<td>1001</td>
						<td class="avoid-overflow" title="这是一条溢出的题目标题，用于测试">这是一条溢出的题目标题，用于测试</td>
						<td>2013-08-20 20:00</td>
						<td>
							<div class="select-down"> 
								<span class="select-down-span status-span">Available<i class="down"></i></span>
								<select class="select-down-select" name="status" autocomplete="off">
									<option value="available" selected="selected" id="http://www.baidu.com">Available</option>
									<option value="reserved" id="http://www.google.com">Reserved</option>
								</select>
							</div>
						</td>
						<td><a href="#">删除</a></td>
						<td><a href="#">编辑</a></td>
						<td><a href="#">测试数据</a></td>
					</tr>
					<tr>
						<td>1001</td>
						<td class="avoid-overflow" title="这是一条溢出的题目标题，用于测试">这是一条溢出的题目标题，用于测试</td>
						<td>2013-08-20 20:00</td>
						<td>
							<div class="select-down"> 
								<span class="select-down-span status-span">Available<i class="down"></i></span>
								<select class="select-down-select" name="status" autocomplete="off">
									<option value="available" selected="selected" id="http://www.baidu.com">Available</option>
									<option value="reserved" id="http://www.google.com">Reserved</option>
								</select>
							</div>
						</td>
						<td><a href="#">删除</a></td>
						<td><a href="#">编辑</a></td>
						<td><a href="#">测试数据</a></td>
					</tr>
					<tr>
						<td>1001</td>
						<td class="avoid-overflow" title="这是一条溢出的题目标题，用于测试">这是一条溢出的题目标题，用于测试</td>
						<td>2013-08-20 20:00</td>
						<td>
							<div class="select-down"> 
								<span class="select-down-span status-span">Available<i class="down"></i></span>
								<select class="select-down-select" name="status" autocomplete="off">
									<option value="available" selected="selected" id="http://www.baidu.com">Available</option>
									<option value="reserved" id="http://www.google.com">Reserved</option>
								</select>
							</div>
						</td>
						<td><a href="#">删除</a></td>
						<td><a href="#">编辑</a></td>
						<td><a href="#">测试数据</a></td>
					</tr>
					<tr>
						<td>1001</td>
						<td class="avoid-overflow" title="这是一条溢出的题目标题，用于测试">这是一条溢出的题目标题，用于测试</td>
						<td>2013-08-20 20:00</td>
						<td>
							<div class="select-down"> 
								<span class="select-down-span status-span">Available<i class="down"></i></span>
								<select class="select-down-select" name="status" autocomplete="off">
									<option value="available" selected="selected" id="http://www.baidu.com">Available</option>
									<option value="reserved" id="http://www.google.com">Reserved</option>
								</select>
							</div>
						</td>
						<td><a href="#">删除</a></td>
						<td><a href="#">编辑</a></td>
						<td><a href="#">测试数据</a></td>
					</tr>
					<tr>
						<td>1001</td>
						<td class="avoid-overflow" title="这是一条溢出的题目标题，用于测试">这是一条溢出的题目标题，用于测试</td>
						<td>2013-08-20 20:00</td>
						<td>
							<div class="select-down"> 
								<span class="select-down-span status-span">Available<i class="down"></i></span>
								<select class="select-down-select" name="status" autocomplete="off">
									<option value="available" selected="selected" id="http://www.baidu.com">Available</option>
									<option value="reserved" id="http://www.google.com">Reserved</option>
								</select>
							</div>
						</td>
						<td><a href="#">删除</a></td>
						<td><a href="#">编辑</a></td>
						<td><a href="#">测试数据</a></td>
					</tr>
					<tr>
						<td>1001</td>
						<td class="avoid-overflow" title="这是一条溢出的题目标题，用于测试">这是一条溢出的题目标题，用于测试</td>
						<td>2013-08-20 20:00</td>
						<td>
							<div class="select-down"> 
								<span class="select-down-span status-span">Available<i class="down"></i></span>
								<select class="select-down-select" name="status" autocomplete="off">
									<option value="available" selected="selected" id="http://www.baidu.com">Available</option>
									<option value="reserved" id="http://www.google.com">Reserved</option>
								</select>
							</div>
						</td>
						<td><a href="#">删除</a></td>
						<td><a href="#">编辑</a></td>
						<td><a href="#">测试数据</a></td>
					</tr>
					<tr>
						<td>1001</td>
						<td class="avoid-overflow" title="这是一条溢出的题目标题，用于测试">这是一条溢出的题目标题，用于测试</td>
						<td>2013-08-20 20:00</td>
						<td>
							<div class="select-down"> 
								<span class="select-down-span status-span">Available<i class="down"></i></span>
								<select class="select-down-select" name="status" autocomplete="off">
									<option value="available" selected="selected" id="http://www.baidu.com">Available</option>
									<option value="reserved" id="http://www.google.com">Reserved</option>
								</select>
							</div>
						</td>
						<td><a href="#">删除</a></td>
						<td><a href="#">编辑</a></td>
						<td><a href="#">测试数据</a></td>
					</tr>
					<tr>
						<td>1001</td>
						<td class="avoid-overflow" title="这是一条溢出的题目标题，用于测试">这是一条溢出的题目标题，用于测试</td>
						<td>2013-08-20 20:00</td>
						<td>
							<div class="select-down"> 
								<span class="select-down-span status-span">Available<i class="down"></i></span>
								<select class="select-down-select" name="status" autocomplete="off">
									<option value="available" selected="selected" id="http://www.baidu.com">Available</option>
									<option value="reserved" id="http://www.google.com">Reserved</option>
								</select>
							</div>
						</td>
						<td><a href="#">删除</a></td>
						<td><a href="#">编辑</a></td>
						<td><a href="#">测试数据</a></td>
					</tr>
					<tr>
						<td>1001</td>
						<td class="avoid-overflow" title="这是一条溢出的题目标题，用于测试">这是一条溢出的题目标题，用于测试</td>
						<td>2013-08-20 20:00</td>
						<td>
							<div class="select-down"> 
								<span class="select-down-span status-span">Available<i class="down"></i></span>
								<select class="select-down-select" name="status" autocomplete="off">
									<option value="available" selected="selected" id="http://www.baidu.com">Available</option>
									<option value="reserved" id="http://www.google.com">Reserved</option>
								</select>
							</div>
						</td>
						<td><a href="#">删除</a></td>
						<td><a href="#">编辑</a></td>
						<td><a href="#">测试数据</a></td>
					</tr>
				</tbody>
			</table>
		</div>
		<div class="clearfix"></div>
	</div>
</div>
<script type="text/javascript">
	$(".select-down > select").change(function() {
		var value = this.value;
		var text = $(this).find("option[value="+value+"]").text();
		$(this).siblings("span").text(text)
				.append("<i class='down'></i>").removeClass("placeholder");
	})

    $(".problem-list select[name='status']").change(function() {
        var status = this.value;
        var pid = $(this).parents("tr").find(".pid").text();
        var url = '<?php echo site_url('admin/problem/update_defunct/'); ?>'+'/'+pid;
        if(status == "available") {
            $.get(url+'/0',function(data){
                console.log(data);
            });
        }else {
             $.get(url+'/1',function(data){
                console.log(data);
            });           
        }
    });

    $(".pdel").on("click",function(c){
        c.preventDefault();
        var line = $(this).parent().parent();
        var pid = line.find(".pid").text();
        var url = '<?php echo site_url("admin/problem/del"); ?>'+'/'+pid;
            $.getJSON(url,function(data){
                if(data.status == true ){
                    line.fadeOut();
                }else{
                    alert(data.reason);
                }
            });
    })
</script>
</body>
</html>